<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />
  
  <meta property="og:title" content="Raspberry Pi Timelapse Camera" />
  <meta name="twitter:title" content="Raspberry Pi Timelapse Camera" />
  
  <title>Raspberry Pi Timelapse Camera - clayto</title>

  
  <meta name="description" content="Creative coding and web stuff." />
  <meta property="og:description" content="Creative coding and web stuff." />
  <meta name="twitter:description" content="Creative coding and web stuff." />
  

  <meta name="author" content="" />
  <meta property="og:site_name" content="clayto" />
  <meta property="og:url" content="https://clayto.com/2014/05/raspberry-pi-timelapse-camera/" />

  
  <meta property="og:image" content="https://clayto.com/2014/05/raspberry-pi-timelapse-camera/./scene_morning_light.jpg" />
  <meta
    name="twitter:image"
    content="https://clayto.com/2014/05/raspberry-pi-timelapse-camera/./scene_morning_light.jpg"
  />
  
  <meta name="twitter:card" content="summary" />

  
  <meta name="twitter:site" content="@mwcz" />
  <meta name="twitter:creator" content="@mwcz" />
   
  <meta property="og:type" content="article" />
   
  
  <meta name="generator" content="Hugo 0.56.1" /><link media="screen"
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600"
    rel="stylesheet"
  />
  <link media="screen" rel="stylesheet" href="https://clayto.com/css/styles.min.css" />

  
  <link
    rel="apple-touch-icon"
    sizes="180x180"
    href="https://clayto.com/images/favicons/apple-touch-icon.png?v=alQ2onMqbL"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="32x32"
    href="https://clayto.com/images/favicons/favicon-32x32.png?v=alQ2onMqbL"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="https://clayto.com/images/favicons/favicon-16x16.png?v=alQ2onMqbL"
  />
  <link rel="manifest" href="https://clayto.com/images/favicons/site.webmanifest?v=alQ2onMqbL" />
  <link
    rel="mask-icon"
    href="https://clayto.com/images/favicons/safari-pinned-tab.svg?v=alQ2onMqbL"
    color="#121212"
  />
  <link rel="shortcut icon" href="https://clayto.com/images/favicons/favicon.ico?v=alQ2onMqbL" />
  <meta name="msapplication-TileColor" content="#121212" />
  <meta
    name="msapplication-config"
    content="/images/favicons/browserconfig.xml?v=alQ2onMqbL"
  />
  <meta name="theme-color" content="#121212" />
   
  
  

</head>

<body>
  
  
  
  
  
  
  
  
  
  
  
  
<header class="pbp-navbar-container">
  
<nav class="pbp-navbar" role="navigation">
  <div class="pbp-nav-description">
    WEB, DEMOS, GAMEDEV.&nbsp;&nbsp;
  </div>
  <div class="pbp-nav-logo">
    <a href="https://clayto.com/" title="https://clayto.com/ homepage" id="pbp-logo">
      <img src="https://clayto.com/images/logo.png">
    </a>
  </div>
  <div class="pbp-navitems">
    
    
    
    <a href="https://clayto.com/" class="pbp-navitem">
      &nbsp;BLOG</a>
    
    &nbsp;<span class="pbp-nav-separator">&middot;</span>
    
    
    <a href="https://clayto.com/demos" class="pbp-navitem">
      &nbsp;DEMOS</a>
    
    &nbsp;<span class="pbp-nav-separator">&middot;</span>
    
    
    <a href="https://clayto.com/games" class="pbp-navitem">
      &nbsp;GAMES</a>
    
    
  </div>
</nav>




</header>
  <main id="main" role="main" class="container">


<article class="pbp-article">

  <header>
    <h1>Raspberry Pi Timelapse Camera</h1>
  </header>

  

  <div class="pbp-article-meta">
    <time datetime="2014-05-15T00:00:00Z">
      May 15, 2014
    </time>
    
    <span class="pbp-blue">&middot;</span>
    2 minute read
    <br>
    <span class="pbp-article-tags">
      
      <a href="https://clayto.com/tags/programming" class="c-tag">#programming</a>
      
      <a href="https://clayto.com/tags/raspberry-pi" class="c-tag">#raspberry pi</a>
      
      <a href="https://clayto.com/tags/photography" class="c-tag">#photography</a>
      
      <a href="https://clayto.com/tags/timelapse" class="c-tag">#timelapse</a>
      
      <a href="https://clayto.com/tags/camera" class="c-tag">#camera</a>
      
    </span>
  </div>

  
  
  <section>
    

<p>I built a timelapse camera with a raspberry pi.</p>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="//player.vimeo.com/video/185804638" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
 </div>


<p>Hardware:</p>

<ul>
<li><a href="http://amzn.com/B008YE0HAW">A small gorillapod</a></li>
<li><a href="http://www.raspberrypi.org/products/camera-module/">Raspbery Pi camera</a></li>
<li><a href="https://en.wikipedia.org/wiki/Raspberry_Pi">Raspberry Pi Model B</a></li>
</ul>

<p>Software:</p>

<p>The scripts I wrote are pretty hasty.  I should tidy them up before publishing
this post.</p>

<p><img src="scene_morning_light.jpg" alt="Timelapse scene" title="Timelapse scene" /></p>

<p>I didn&rsquo;t secure the pi very well when I first framed the shot, and it wound up
getting bumped several times.  Lesson learned: make sure</p>

<h2 id="file-naming">File naming</h2>

<p>I used Epoch time for the filenames.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">1396020890.jpg
1396021196.jpg
1396021502.jpg
1396021808.jpg</code></pre></div>
<p>This was a spontaneous decision but it turned out to have some unexpected benefits.</p>

<p>Eliminating night-time shots was as simple as doing some modulo math on the time.</p>

<p>Doing some modulo math on the epoch times made isolating the dark hours easy.
Since Epoch time is measured in seconds, all we need to know is the number of
seconds in a minute, hour, and day.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># number of seconds in a minute/hour/day</span>
minute <span style="color:#f92672">=</span> <span style="color:#ae81ff">60</span>
hour   <span style="color:#f92672">=</span> <span style="color:#ae81ff">3600</span>
day    <span style="color:#f92672">=</span> <span style="color:#ae81ff">86400</span></code></pre></div>
<p>Now that we have those values, we can play around with <a href="https://en.wikipedia.org/wiki/Modulo_operation">modulo</a> math to find some cool stuff.</p>

<p>The first order of business is to eliminate any photos taken at nighttime,
because they&rsquo;re all too dark to be useful.  Using <code>1396020890</code> as an example&hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ae81ff">1396020890</span> <span style="color:#f92672">%</span> <span style="color:#ae81ff">86400</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">56090</span>
</code></pre></div>
<p><code>86400</code> is the number of seconds in a day, and what this operation does is
essentially remove the day/month/year components.  What&rsquo;s left is the time
since the stroke of midnight (still in seconds).</p>

<figure>
    <div role="math">
        \dfrac{56090 seconds since midnight}{3600 seconds/hour}
    </div>
</figure>

<p>Dividing</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">time <span style="color:#f92672">=</span> <span style="color:#ae81ff">1396020890</span>
seconds_after_midnight <span style="color:#f92672">=</span> time <span style="color:#f92672">%</span> day <span style="color:#75715e"># gives us the number of seconds after midnight</span>
hours_after_midnight <span style="color:#f92672">=</span> (seconds_after_midnight) <span style="color:#f92672">/</span> hour <span style="color:#75715e"># gives us the number of hours after midnight</span>
local_hour <span style="color:#f92672">=</span> hours_after_midnight <span style="color:#f92672">-</span> <span style="color:#ae81ff">4</span> <span style="color:#75715e"># I&#39;m in EST, so -4 GMT</span>
<span style="color:#66d9ef">if</span> local_hour <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">7</span>  <span style="color:#f92672">or</span> local_hour <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">20</span>: skip</code></pre></div>
<h2 id="loops-vs-cron">Loops vs cron</h2>

<p>The script contains an infinite loop with a 5m <code>sleep</code> command.  Thus the
pictures weren&rsquo;t taken every 5 minutes, but rather every 5-and-some-change
minutes.  This drift doesn&rsquo;t matter for intervals several minutes long, or
longer, but if the interval were much shorter, it could be a big problem.  An
interval of 5m + 5s drift isn&rsquo;t a big deal.</p>

<p><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css"></p>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js"></script>

<script>
    function render_math(el) {
        katex.render(el.textContent, el);
    }
    document.querySelectorAll('[role=math]').forEach(render_math);
</script>

  </section>
  <footer>

    

    

    




  </footer>
</article>
  </main>
  <footer class="container">
    <section class="pbp-footer">
      
<aside>
  
    <small class="footer-label">CONTACT ME</small>
    
    
    
    
<ul class="pbp-social-links">
  
  <li>
    <a title="Email me" href="mailto:mwc@clayto.com">
      <span class="icon-mail"></span>
    </a>
  </li>
  
  
  <li>
    <a title="my GitHub activity" href="https://github.com/mwcz" target="_blank">
      <span class="icon-github-squared"></span>
    </a>
  </li>
  
  
  <li>
    <a title="my CodePens" href="https://codepen.io/mwcz" target="_blank">
      <span class="icon-codepen"></span>
    </a>
  </li>
  
  
  <li>
    <a title="my Twitter" href="https://twitter.com/mwcz" target="_blank">
      <span class="icon-twitter-squared"></span>
    </a>
  </li>
  
  
  
  
  
  
  
  
  
  
  
  
  <li>
    <a title="my Vimeo videos" href="https://vimeo.com/mwcz" target="_blank">
      <span class="icon-vimeo-squared"></span>
    </a>
  </li>
  
  
  
</ul>


  
</aside>


    </section>

    
    
    
    
    

    
    
    
    
    
    
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js"></script>
  <script>
    anchors.options.visible = 'touch';
    anchors.options.placement = 'right';
    anchors.options.class = 'heading-anchor';
    anchors.add('article > section h1,article > section h2,article > section h3,article > section h4,article > section h5,article > section h6');
  </script>

  
    
  

</body>
</html>

