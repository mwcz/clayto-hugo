class n{constructor(t,s){this.x=0;this.y=0;this.set(t,s)}mag(){return Math.sqrt(this.x**2+this.y**2)}set(t,s){this.x=t,this.y=s}normalize(){const t=this.mag();this.x/=t,this.y/=t}add(t){this.x+=t.x,this.y+=t.y}sub(t){this.x-=t.x,this.y-=t.y}muls(t){this.x*=t,this.y*=t}scale(t){let s=this.mag();this.x=t*this.x/s,this.y=t*this.y/s}cross(t){return this.x*t.y-this.y*t.x}}let a=new n(0,0);document.addEventListener("mousemove",o=>{a.set(o.clientX,o.clientY)});const e=class{constructor(t){this.el=t;let s=t.getBoundingClientRect();this.opos=new n(s.x,s.y),this.size=new n(s.width,s.height),this.off=new n(0,0),this.vel=new n(0,0),this.acc=new n(0,0),this.rot=0,this.rotv=0,this.torque=0,this.scale=1}updateOriginalPosition(){this.el.style.transform="none";let t=this.el.getBoundingClientRect();this.opos.set(t.x,t.y)}animate(){this.updateAccel(),this.updateVelocity(),this.updatePos(),this.updateAngularAccel(),this.updateAngularVelocity(),this.updateAngle(),this.updateTransform()}get pos(){return new n(this.opos.x+this.off.x,this.opos.y+this.off.y)}updateAngularAccel(){let t=this.pos.cross(a)*e.ROT_ACCEL_SCALE;Math.abs(t)>e.ROT_ACCEL_MAX&&(t=t/Math.abs(t)*e.ROT_ACCEL_MAX),this.torque=-t}updateAngularVelocity(){this.rotv+=this.torque,Math.abs(this.rotv)>e.ROT_VEL_MAX&&(this.rotv=e.ROT_VEL_MAX*this.rotv/Math.abs(this.rotv))}updateAngle(){this.rot+=this.rotv/10}updateAccel(){this.acc.set(a.x-(this.opos.x+this.off.x+this.size.x/2),a.y-(this.opos.y+this.off.y+this.size.y/2)),this.acc.scale(e.ACCEL_RATE)}updateVelocity(){this.vel.add(this.acc),this.vel.mag()>e.VEL_MAX&&this.vel.scale(e.VEL_MAX)}updatePos(){this.off.add(this.vel)}updateTransform(){this.el.style.transform=`translate(${this.off.x}px, ${this.off.y}px) rotate(${this.rot}rad) scale(${this.scale})`}};let i=e;i.ACCEL_RATE=.08,i.VEL_MAX=6.5,i.ROT_ACCEL_MAX=4.08,i.ROT_ACCEL_SCALE=1.1,i.ROT_VEL_MAX=.01,i.SCALE_MAX=1,i.SCALE_MIN=.1;function h(o){requestAnimationFrame(()=>h(o));for(const t of o)t.animate()}function u(o){const t=[...document.querySelectorAll(o)].map(s=>new i(s));document.addEventListener("resize",s=>{t.forEach(r=>r.updateOriginalPosition())}),h(t)}export{u as eggify};
//# sourceMappingURL=egg.js.map
