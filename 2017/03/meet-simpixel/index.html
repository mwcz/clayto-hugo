<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />
  
  <meta property="og:title" content="Meet SimPixel" />
  <meta name="twitter:title" content="Meet SimPixel" />
  
  <title>Meet SimPixel - clayto</title>

  
  <meta name="description" content="A WebGL-based visualizer for LED displays." />
  <meta property="og:description" content="A WebGL-based visualizer for LED displays." />
  <meta name="twitter:description" content="A WebGL-based visualizer for LED displays." />
  

  <meta name="author" content="" />
  <meta property="og:site_name" content="clayto" />
  <meta property="og:url" content="https://clayto.com/2017/03/meet-simpixel/" />

  
  <meta property="og:image" content="https://clayto.com/2017/03/meet-simpixel/./thumb.jpg" />
  <meta
    name="twitter:image"
    content="https://clayto.com/2017/03/meet-simpixel/./thumb.jpg"
  />
  
  <meta name="twitter:card" content="summary" />

  
  <meta name="twitter:site" content="@mwcz" />
  <meta name="twitter:creator" content="@mwcz" />
   
  <meta property="og:type" content="article" />
   
  
  <meta name="generator" content="Hugo 0.54.0" /><link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="https://clayto.com/css/styles.min.css" />

  
  <link
    rel="apple-touch-icon"
    sizes="180x180"
    href="https://clayto.com/images/favicons/apple-touch-icon.png?v=alQ2onMqbL"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="32x32"
    href="https://clayto.com/images/favicons/favicon-32x32.png?v=alQ2onMqbL"
  />
  <link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="https://clayto.com/images/favicons/favicon-16x16.png?v=alQ2onMqbL"
  />
  <link rel="manifest" href="https://clayto.com/images/favicons/site.webmanifest?v=alQ2onMqbL" />
  <link
    rel="mask-icon"
    href="https://clayto.com/images/favicons/safari-pinned-tab.svg?v=alQ2onMqbL"
    color="#121212"
  />
  <link rel="shortcut icon" href="https://clayto.com/images/favicons/favicon.ico?v=alQ2onMqbL" />
  <meta name="msapplication-TileColor" content="#121212" />
  <meta
    name="msapplication-config"
    content="/images/favicons/browserconfig.xml?v=alQ2onMqbL"
  />
  <meta name="theme-color" content="#121212" />
   
  
  

</head>

<body>
  
  
  
  
  
  
  
  
  
  
  
  
<header class="pbp-navbar-container">
  
<nav class="pbp-navbar" role="navigation">
  <div class="pbp-nav-description">
    WEB, DEMOS, GAMEDEV.&nbsp;&nbsp;
  </div>
  <div class="pbp-nav-logo">
    <a href="https://clayto.com/" title="https://clayto.com/ homepage" id="pbp-logo">
      <img src="https://clayto.com/images/logo.png">
    </a>
  </div>
  <div class="pbp-navitems">
    
    
    
    <a href="https://clayto.com/" class="pbp-navitem">
      &nbsp;BLOG</a>
    
    &nbsp;<span class="pbp-nav-separator">&middot;</span>
    
    
    <a href="https://clayto.com/demos" class="pbp-navitem">
      &nbsp;DEMOS</a>
    
    &nbsp;<span class="pbp-nav-separator">&middot;</span>
    
    
    <a href="https://clayto.com/games" class="pbp-navitem">
      &nbsp;GAMES</a>
    
    
  </div>
</nav>




</header>
  <main id="main" role="main" class="container">


<article class="pbp-article">

  <header>
    <h1>Meet SimPixel</h1>
  </header>

  

  <div class="pbp-article-meta">
    <time datetime="2017-03-10T00:00:00Z">
      Mar 10, 2017
    </time>
    
    <span class="pbp-blue">&middot;</span>
    3 minute read
    <br>
    <span class="pbp-article-tags">
      
      <a href="https://clayto.com/tags/programming" class="c-tag">#programming</a>
      
      <a href="https://clayto.com/tags/demos" class="c-tag">#demos</a>
      
      <a href="https://clayto.com/tags/javascript" class="c-tag">#javascript</a>
      
      <a href="https://clayto.com/tags/threejs" class="c-tag">#threejs</a>
      
      <a href="https://clayto.com/tags/webgl" class="c-tag">#webgl</a>
      
      <a href="https://clayto.com/tags/3d" class="c-tag">#3d</a>
      
      <a href="https://clayto.com/tags/art" class="c-tag">#art</a>
      
      <a href="https://clayto.com/tags/web" class="c-tag">#web</a>
      
      <a href="https://clayto.com/tags/led" class="c-tag">#led</a>
      
      <a href="https://clayto.com/tags/maniacal-labs" class="c-tag">#maniacal-labs</a>
      
    </span>
  </div>

  
  
  <section>
    

<p>I have someone I&rsquo;d like you to meet. SimPixel, meet everyone. Everyone,
SimPixel.</p>

<div id="simpixel-container"></div>

<h1 id="simpixel-introduce-yourself">SimPixel, introduce yourself</h1>

<p>SimPixel is a WebGL visualizer for LED displays, <em>very</em> much like the ones Adam
and Dan build over at <a href="http://maniacallabs.com/">Maniacal Labs</a>.</p>

<style type="text/css">
#mlabs {
    height: 50vh !important;
}
@media screen and (min-width: 660px) {
    #mlabs {
        float: right;
        margin-left: 20px;
    }
}
</style>

<figure>
<img src="maniacal.jpg" alt="some Maniacal Labs LED projects" />
</figure>

<p>Very much alike.  In fact, it&rsquo;s probably <em>so</em> much like their displays because I built
most of SimPixel while sitting at Adam&rsquo;s workbench. I don&rsquo;t know, there could
be a connection. If you too would like to take a seat at Adam&rsquo;s illustrious
workbench someday, <a href="https://github.com/ManiacalLabs/SimPixel">hack away</a>. You can also try the <a href="https://clayto.com/static/projects/simpixel">fullscreen
demo</a>.</p>

<p><a href="https://github.com/ManiacalLabs/BiblioPixel/wiki">BiblioPixel</a>, <abbr title="Maniacal Labs">ML&rsquo;s</abbr> light animation
library, sends layouts and colors to SimPixel using a simple <a href="https://en.wikipedia.org/wiki/WebSocket">WebSocket</a>
protocol.</p>

<hr />

<h1 id="the-protocol">The Protocol</h1>

<p>By itself, SimPixel is useless. To turn on the lights, it connects to a
WebSocket service. That service is expected to send certain messages, namely a
configuration message followed by a series of color messages.</p>

<hr />

<h2 id="configuration-message">Configuration message</h2>

<p>The configuration message conveys the spatial layout of the LEDs.</p>

<p>For example, a configuration message of <code>0x0000009A02FE000C</code> is interpreted as
follows.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">+--------+------+------+------+
| opcode |    X |    Y |    Z |
+--------+------+------+------+
| 0x0000 | 009A | 02FE | 000C |
+--------+------+------+------+
| config |  154 |  766 |   12 |
+--------+------+------+------+</code></pre></div>
<p>The leading <code>0x0000</code> opcode identifies this as a configuration message,
followed by a series of 16-bit signed integers which indicate the 3D
coordinates of each LED, of the form: <code>X<sub>1</sub>,Y<sub>1</sub>,Z<sub>1</sub>,X<sub>2</sub>,Y<sub>2</sub>,Z<sub>2</sub>,
&hellip;, X<sub>n</sub>,Y<sub>n</sub>,Z<sub>n</sub></code></p>

<hr />

<h2 id="color-message">Color message</h2>

<p>The color message(s) specify what color each LED should be at the current
moment in time.</p>

<p>An example color message, <code>0x0001 40 D6 7F</code>, breaks down to:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">+--------+-----+-----+-----+
| opcode |   R |   G |   B |
+--------+-----+-----+-----+
| 0x0001 |  40 |  D6 |  7F |
+--------+-----+-----+-----+
| color  |  64 | 214 | 127 |
+--------+-----+-----+-----+</code></pre></div>
<p>The leading <code>0x0001</code> opcode identifies this as a color message, followed by a
series of 8-bit unsigned integers which indicate the RGB colors of each LED,
of the form:
<code>R<sub>1</sub>,G<sub>1</sub>,B<sub>1</sub>,R<sub>2</sub>,G<sub>2</sub>,B<sub>2</sub>,
&hellip;, R<sub>n</sub>,G<sub>n</sub>,B<sub>n</sub></code></p>

<p>For a concise reference, see <a href="https://github.com/ManiacalLabs/SimPixel/blob/master/PROTOCOL.md">PROTOCOL.md</a>.</p>

<hr />

<h1 id="the-ghost-in-the-recording">The Ghost in the Recording</h1>

<p>The live demo at the top of this post isn&rsquo;t connected to any WebSocket service.
Instead, it&rsquo;s using a recording apparatus that I cobbled together. I pushed
a configuration frame and a bunch of color frames into an array, converted
their ArrayBuffers into base64 strings, and saved those into <a href="https://github.com/ManiacalLabs/SimPixel/blob/recording-draft/src/recordings/vis.json">a quite large
JSON recording file</a>.</p>

<p>I only mention it to lead up to the following. While editing the recording
JSON file, I zoomed out a little and something caught my eye. I zoomed out
more and a pattern took shape.</p>

<p>Here&rsquo;s a screenshot of the JSON file in my terminal, zoomed out as far as it&rsquo;ll
go.</p>

<p><img src="recording-base64.png" alt="image of base64-encoded recording" /></p>

<p>The waves of red, green, and blue is evident even in this doubly-encoded
format. Pretty cool.</p>

<!-- SimPixel embedded -->

<div id="connection"></div>

<style type="text/css">
    #simpixel-container {
        width: 100%;
        height: 80vh;
        cursor: move;
    }
    #connection { display: none; }
</style>

<script type="x-shader/x-vertex" id="vertexshader">
    uniform float size;
    attribute vec3 customColor;
    varying vec3 vColor;
    void main() {
        vColor = customColor;
        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
        gl_PointSize = size * ( 300.0 / -mvPosition.z );
        gl_Position = projectionMatrix * mvPosition;
    }
</script>

<script type="x-shader/x-fragment" id="fragmentshader">
    uniform vec3 color;
    uniform sampler2D textureOn;
    uniform sampler2D textureOff;
    varying vec3 vColor;
    void main() {
        /* if color attribute is not black, use 'on' texture with color*/
        if (length(vColor) > 0.0) {
            gl_FragColor = vec4( (color/255.0) * vColor, 1.0 );
            gl_FragColor = gl_FragColor * texture2D( textureOn, gl_PointCoord );
        }
        /* if color attribute is black, use 'off' texture and dark grey */
        else {
            gl_FragColor = vec4(0.4);
            gl_FragColor = gl_FragColor * texture2D( textureOff, gl_PointCoord );
        }
    }
</script>

<!-- third party -->

<script defer src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r83/three.min.js"></script>

<script defer src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/4.0.5/es6-promise.min.js"></script>

<script defer src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.1/fetch.min.js"></script>

<script defer src="js/Detector.js"></script>

<script defer src="js/OrbitControls.js"></script>

<script defer src="js/reconnecting-websocket.js"></script>

<!-- first party -->

<script defer src="js/bp_host.js"></script>

<script defer src="js/conf.js"></script>

<script defer src="js/recording.js"></script>

<script defer src="js/view.js"></script>

<script defer src="js/main.js"></script>

<div hidden>
    <img src="thumb.jpg">
</div>

  </section>
  <footer>

    

    

    

<section>
  <h3>RELATED POSTS</h3>
  <div class="pbp-related">
    
    <article class="pbp-article-li vertical">
  <h2 class="pbp-article-title"><a href="https://clayto.com/2017/01/kimotion-at-geekspark-2016/">Kimotion at geekSPARK 2016</a></h2>
  <div class="pbp-article-summary">
    <section>
      
        Kimotion-powered interactive art at SPARKcon 2016.
      
    </section>
  </div>
  <div class="pbp-article-meta">
    <time datetime="2017-01-12T00:00:00Z">
      Jan 12, 2017
    </time>
  </div>
  
  <a tabindex="-1" class="pbp-article-thumbnail" href="https://clayto.com/2017/01/kimotion-at-geekspark-2016/">
    <div class="pbp-article-thumbnail">
      <div class="glass-card">
        <div class="glass-card-ratio">
          <picture>
            
            
            
               
            
            <img
              class="glass-card-bg glass-card-bg-default"
              src="https://clayto.com/2017/01/kimotion-at-geekspark-2016/thumb.jpg">
          </picture>
          <div class="glass-card-border-outer"></div>
          <div class="glass-card-border-inner"></div>
          
          
          
          
          
        </div>
      </div>
    </div>
  </a>
  
</article>

    
    
    <article class="pbp-article-li vertical">
  <h2 class="pbp-article-title"><a href="https://clayto.com/2014/10/dimo-the-deconstruction-of-falling-stars/">DiMo: The Deconstruction of Falling Stars</a></h2>
  <div class="pbp-article-summary">
    <section>
      
        The construction of a WebGL particle physics gravity simulation <em>slash</em> interactive art installation.
      
    </section>
  </div>
  <div class="pbp-article-meta">
    <time datetime="2014-10-30T00:00:00Z">
      Oct 30, 2014
    </time>
  </div>
  
  <a tabindex="-1" class="pbp-article-thumbnail" href="https://clayto.com/2014/10/dimo-the-deconstruction-of-falling-stars/">
    <div class="pbp-article-thumbnail">
      <div class="glass-card">
        <div class="glass-card-ratio">
          <picture>
            
            
            
               
            
            <img
              class="glass-card-bg glass-card-bg-default"
              src="https://clayto.com/2014/10/dimo-the-deconstruction-of-falling-stars/swath-colors.jpg">
          </picture>
          <div class="glass-card-border-outer"></div>
          <div class="glass-card-border-inner"></div>
          
          
          
          
          
        </div>
      </div>
    </div>
  </a>
  
</article>

    
    
    <article class="pbp-article-li vertical">
  <h2 class="pbp-article-title"><a href="https://clayto.com/2014/08/particles-and-%CF%80-dimo-comes-to-life/">Particles and Ï€ - DiMo Comes to Life</a></h2>
  <div class="pbp-article-summary">
    <section>
      
        A player walks up Fayetteville St in Raleigh, North Carolina.  SPARKcon has begun, and dozens of artists are &hellip;
      
    </section>
  </div>
  <div class="pbp-article-meta">
    <time datetime="2014-08-25T00:00:00Z">
      Aug 25, 2014
    </time>
  </div>
  
  <a tabindex="-1" class="pbp-article-thumbnail" href="https://clayto.com/2014/08/particles-and-%CF%80-dimo-comes-to-life/">
    <div class="pbp-article-thumbnail">
      <div class="glass-card">
        <div class="glass-card-ratio">
          <picture>
            
            
            
               
            
            <img
              class="glass-card-bg glass-card-bg-default"
              src="https://clayto.com/2014/08/particles-and-%CF%80-dimo-comes-to-life/./dimo-kids.jpg">
          </picture>
          <div class="glass-card-border-outer"></div>
          <div class="glass-card-border-inner"></div>
          
          
          
          
          
        </div>
      </div>
    </div>
  </a>
  
</article>

    
    
    <article class="pbp-article-li vertical">
  <h2 class="pbp-article-title"><a href="https://clayto.com/2016/07/visualizing-network-traffic-with-webgl/">Visualizing Network Traffic with WebGL</a></h2>
  <div class="pbp-article-summary">
    <section>
      
        Creating a WebGL particle system to convey network traffic patterns to a live audience at <a href="https://www.redhat.com/summit">Red Hat Summit</a>.
      
    </section>
  </div>
  <div class="pbp-article-meta">
    <time datetime="2016-07-13T00:00:00Z">
      Jul 13, 2016
    </time>
  </div>
  
  <a tabindex="-1" class="pbp-article-thumbnail" href="https://clayto.com/2016/07/visualizing-network-traffic-with-webgl/">
    <div class="pbp-article-thumbnail">
      <div class="glass-card">
        <div class="glass-card-ratio">
          <picture>
            
            
            
               
            
            <img
              class="glass-card-bg glass-card-bg-default"
              src="https://clayto.com/2016/07/visualizing-network-traffic-with-webgl/./post-thumbnail.jpg">
          </picture>
          <div class="glass-card-border-outer"></div>
          <div class="glass-card-border-inner"></div>
          
          
          
          
          
        </div>
      </div>
    </div>
  </a>
  
</article>

    
    
    <article class="pbp-article-li vertical">
  <h2 class="pbp-article-title"><a href="https://clayto.com/2016/07/glow-rope/">Glow Rope</a></h2>
  <div class="pbp-article-summary">
    <section>
      
        A simple WebGL demo of streaming particles.
      
    </section>
  </div>
  <div class="pbp-article-meta">
    <time datetime="2016-07-13T00:00:00Z">
      Jul 13, 2016
    </time>
  </div>
  
  <a tabindex="-1" class="pbp-article-thumbnail" href="https://clayto.com/2016/07/glow-rope/">
    <div class="pbp-article-thumbnail">
      <div class="glass-card">
        <div class="glass-card-ratio">
          <picture>
            
            
            
               
            
            <img
              class="glass-card-bg glass-card-bg-default"
              src="https://clayto.com/2016/07/glow-rope/thumb.jpg">
          </picture>
          <div class="glass-card-border-outer"></div>
          <div class="glass-card-border-inner"></div>
          
          
          
          
          
        </div>
      </div>
    </div>
  </a>
  
</article>

    
    
    <article class="pbp-article-li vertical">
  <h2 class="pbp-article-title"><a href="https://clayto.com/2015/09/make-a-kimotion/">Make a Kimotion!</a></h2>
  <div class="pbp-article-summary">
    <section>
      
        Kimotion is a new framework for building interactive art exhibits.  It will appeal mostly to the Programmer Artist types.  Think &ldquo;Warrior Poet&rdquo;, but with keyboards.
      
    </section>
  </div>
  <div class="pbp-article-meta">
    <time datetime="2015-09-26T00:00:00Z">
      Sep 26, 2015
    </time>
  </div>
  
  <a tabindex="-1" class="pbp-article-thumbnail" href="https://clayto.com/2015/09/make-a-kimotion/">
    <div class="pbp-article-thumbnail">
      <div class="glass-card">
        <div class="glass-card-ratio">
          <picture>
            
            
            
               
            
            <img
              class="glass-card-bg glass-card-bg-default"
              src="https://clayto.com/2015/09/make-a-kimotion/thumb.jpg">
          </picture>
          <div class="glass-card-border-outer"></div>
          <div class="glass-card-border-inner"></div>
          
          
          
          
          
        </div>
      </div>
    </div>
  </a>
  
</article>

    
    
  </div>
</section>




  </footer>
</article>
  </main>
  <footer class="container">
    <section class="pbp-footer">
      
<aside>
  
    <small class="footer-label">CONTACT ME</small>
    
    
    
    
<ul class="pbp-social-links">
  
  <li>
    <a title="Email me" href="mailto:mwc@clayto.com">
      <span class="icon-mail"></span>
    </a>
  </li>
  
  
  <li>
    <a title="my GitHub activity" href="https://github.com/mwcz" target="_blank">
      <span class="icon-github-squared"></span>
    </a>
  </li>
  
  
  <li>
    <a title="my CodePens" href="https://codepen.io/mwcz" target="_blank">
      <span class="icon-codepen"></span>
    </a>
  </li>
  
  
  <li>
    <a title="my Twitter" href="https://twitter.com/mwcz" target="_blank">
      <span class="icon-twitter-squared"></span>
    </a>
  </li>
  
  
  
  
  
  
  
  
  
  
  
  
  <li>
    <a title="my Vimeo videos" href="https://vimeo.com/mwcz" target="_blank">
      <span class="icon-vimeo-squared"></span>
    </a>
  </li>
  
  
  
</ul>


  
</aside>


    </section>

    
    
    
    
    

    
    
    
    
    
    
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js"></script>
  <script>
    anchors.options.visible = 'touch';
    anchors.options.placement = 'right';
    anchors.options.class = 'heading-anchor';
    anchors.add('article > section h1,article > section h2,article > section h3,article > section h4,article > section h5,article > section h6');
  </script>

  
    
  

</body>
</html>

